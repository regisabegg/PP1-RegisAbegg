@model PP1.CONTRATO.WEB.Models.Estado.ConsultaVM
@using PP1.CONTRATO.WEB.Util;
@{
    bool Disabled = Convert.ToBoolean(ViewData["Disabled"]);
    bool Required = Convert.ToBoolean(ViewData["Required"] ?? true);
    bool LabelVertical = Convert.ToBoolean(ViewData["LabelVertical"]);
    string Label = Convert.ToString(ViewData["Label"] ?? "País");
    string classLabel = Convert.ToString(ViewData["classLabel"] ?? Helper.Label);
    string classForm = Convert.ToString(ViewData["classForm"] ?? Helper.InputLG);
    var Prefix = Html.ClientPrefixName().ToString();
}
@Html.HiddenFor(model => model.idEstado)
@if (Disabled)
{

    if (!LabelVertical)
    {
        @Html.LabelFor(e => e.nmEstado, Label, new { @class = classLabel })
    }
    <div class="@classForm">
        @if (LabelVertical)
        {
            @Html.LabelFor(e => e.nmEstado, Label, new { @class = "form-control-label" })
        }
        @Html.TextBoxFor(model => model.nmEstado, new { @class = "form-control", @readonly = "readonly" })

    </div>

}
else
{

    if (LabelVertical)
    {
        @Html.LabelFor(e => e.nmEstado, Label, new { @class = classLabel })
    }
    <div class="col-lg-12">
        <div class="form-group">
            @Html.LabelFor(e => e.nmEstado, Label, new { @class = "form-control-label" })
            @Html.DropDownList("select", new List<SelectListItem>(), new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.idEstado, null, new { @class = "help-block" }.AppendIf(!Required, "class", "no-required"))
        </div>
        @Html.HiddenFor(model => model.idEstado)
        @Html.HiddenFor(model => model.nmEstado)
    </div>


    @Html.AddScriptBlock(
                @<script type="text/javascript">
        $(function () {


            shared_function["@Prefix"] = new sSelect({
                prefix: "@Prefix",
                select: {
                    url: '@Url.Action("JsSelect", "Estado")',
                },
                details:{
                    url: '@Url.Action("JsDetails", "Estado")',
                },
                placeholder: "Buscar @Label".toString(),
                elements: {
                    $id: $('#@Html.ClientIdFor(e => e.idEstado)'),
                    $text: $('#@Html.ClientIdFor(e => e.nmEstado)'),
                },
                templateResult: function (data) {
                    if (data.loading) return data.nmEstado;
                    return '<div class="row no-margin">' +
                        '<div class="col-lg-2  col-md-2  col-sm-3 col-xs-3">' + data.idEstado + '</div>' +
                        '<div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">' + data.nmEstado + '</div>' +
                        '</div>';
                },
                templateHeader: '<div class="row no-margin select2-header">' +
                    '<div class="col-lg-2  col-md-2  col-sm-3 col-xs-3">Código</div>' +
                    '<div class="col-lg-10 col-md-10 col-sm-9 col-xs-9">País</div>' +
                    '</div>'

            });
           shared_function["@Prefix"].init();
        });
                </script>
)
}

